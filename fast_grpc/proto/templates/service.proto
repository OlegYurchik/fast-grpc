syntax = "proto3";
package {{ service.package_name }};

service {{ service.name }} {
{% for method in service.methods.values() %}
    rpc {{ method.name }}({{ method.request.name }}) returns ({{ method.response.name}}) {}
{% endfor %}
}

{% for name, enum in service.enums.items() -%}
enum {{ name }} {
    {% for value in enum -%}
    {{ value.name }} = {{ loop.index0 }};
    {% endfor -%}
}
{% endfor %}

{% for message in service.messages.values() %}
message {{ message.name }} {
{% for field in message.fields.values() %}
    {% if field.repeated %}repeated {% endif -%}
    {{ field.render() }} = {{ loop.index0 + 1 }};
{% endfor %}
}

{% endfor -%}
